/*! AJAX Search Widget for Blogger V2 <https://dte-project.github.io/blogger/search.html> */
window.q2o=function(e,t){function r(e){return decodeURIComponent(e)}function n(e){return void 0!==e}function i(e){return"string"==typeof e}function a(e){if(i(e)){if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("'"===e.slice(0,1)&&"'"===e.slice(-1))return e.slice(1,-1);if(/^-?(\d*\.)?\d+$/.test(e))return+e;if(function(e){return!(!i(e)||""===e.trim())&&('""'===e||"[]"===e||"{}"===e||'"'===e[0]&&'"'===e.slice(-1)||"["===e[0]&&"]"===e.slice(-1)||"{"===e[0]&&"}"===e.slice(-1))}(e))try{return JSON.parse(e)}catch(e){}}return e}var s={},o=e.replace(/^.*?\?/,"");return""===o||o.split(/&(?:amp;)?/).forEach((function(e){var i=e.split("="),o=r(i[0]),l=!n(i[1])||r(i[1]);l=!n(t)||t?a(l):l,"]"===o.slice(-1)?function(e,t,r){for(var n,i=t.split("["),a=0,s=i.length;s-1>a;++a)e=e[n=i[a].replace(/\]$/,"")]||(e[n]={});e[i[a].replace(/\]$/,"")]=r}(s,o,l):s[o]=l})),s},function(e,t){function r(e){return encodeURIComponent(e)}function n(e){return void 0!==e}function i(e){return"number"==typeof e||/^-?(\d*\.)?\d+$/.test(e)}function a(e){return null!==e&&"object"==typeof e}function s(e,t){for(var r in t=t||{},e)n(t[r])?a(e[r])&&a(t[r])&&(t[r]=s(e[r],t[r])):t[r]=e[r];return t}function o(e,t,r){e.addEventListener(t,r,!1)}function l(e,r,i){if(e=t.createElement(e),n(r)&&""!==r&&(e.innerHTML=r),a(i))for(var s in i)!1!==i[s]&&e.setAttribute(s,i[s]);return e}function c(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.add(r)}function u(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.remove(r)}function f(e,t,r){t&&e.insertBefore(t,r)}function d(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e,t){var n,i=[];for(n in e)i.push(r(n)+"="+r(e[n]));return"?"+i.join(t||"&")}function h(e,t){return e=(e+"").split(/[?&#]/)[0].replace(/\/+$/,""),n(t)&&(e=e.replace(/\.[\w-]+$/,t?"."+t:"")),e}function m(e){return i(e)?("file:"===L.protocol?"https:":"")+"//www.blogger.com/feeds/"+e+"/posts/summary":h(e)+"/feeds/posts/summary"}function y(e,t,r){var n=/\.css$/i.test(h(e)),i=l(n?"link":"script","",s(n?{href:e,rel:"stylesheet"}:{src:e},r));return i.readyState?i.onreadystatechange=function(){("loaded"===i.readyState||"complete"===i.readyState)&&(i.onreadystatechange=null,t&&t(i))}:t&&o(i,"load",t),f(_,i,_.firstChild),i}function g(e,t,r){(r=r||[]).unshift(t),"function"==typeof A&&A.apply(e,r)}function v(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function x(e){if(!E)return e;var t=RegExp(E.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\\\$&"),"i");return e.replace(t,"<mark>$&</mark>")}function k(t){return e.getComputedStyle(G).getPropertyValue(t)}function w(t){if(!z.container&&K.parentNode){var r=B.getBoundingClientRect(),n=r.top,i=r.left,a=r.width,s=r.height;c(K,D+"-float"),K.style.cssText="background-color:"+k("background-color")+";color:"+k("color")+";position:fixed;z-index:9999;top:"+(n+s)+"px;left:"+i+"px;width:"+a+"px;max-height:"+(e.innerHeight-n-s)+"px;overflow:auto;",g(K,t&&t.type||"fit",[r])}}function $(e,t){var r=j[e][t],n=K.children[0],i=1===M?"empty":"end";f(n,W),r[0]?(Z.style.display=M>1?"":"none",ee.style.display=F>r[0]?"none":"",X.innerHTML=r[1],f(n,X)):(n.innerHTML='<p class="'+D+"-results-"+i+'">'+V[i].replace("%s%",v(E))+"</p>",ee.style.display="none"),f(n,Y),f(G,K),w(),d(Q)}function b(e){e&&e.preventDefault()}function q(){var e,t=this.q;t=t&&t.value,W.innerHTML=V.title.replace("%s%",v(t)),K.children[0].innerHTML="",t?(t=t.toLowerCase(),(e=!(!j[t]||!j[t][M]))?$(t,M):function(e,t){const i=e.split(/\s+/);E=i.join(" ");let a=[];i.forEach((e=>{let i=new Promise((i=>{y(m(R)+p(s(z.query,{callback:"_"+H,"max-results":F,q:r(e),"start-index":t})),(function(){u(B,D+"-loading"),n(j[e])||(j[e]={});let r=X.innerHTML;j[e][t]=[X.children.length,r],i()}))}));a.push(i)})),Promise.all(a).then((()=>{$(i.join(" "),t)}))}(t,M),g(B,"search",[t,M,e,K])):(f(G,Q),d(K))}function T(t){var r=this;t.key&&"Enter"===t.key||t.keyCode&&13===t.keyCode||e.setTimeout((function(){se?(ae&&e.clearTimeout(ae),ae=e.setTimeout((function(){q.call(B)}),i(se)?+se:500)):""===r.value&&(f(G,Q),d(K))}),1)}var S=e.q2o,C=t.currentScript,L=e.location,N=e.localStorage,E="",M=1,j={},H=Date.now(),I={i:H,direction:"ltr",url:L.protocol+"//"+L.host,name:"ajax-search",css:1,ad:!0,live:!0,source:'form[action$="/search"]',container:0,excerpt:0,image:0,target:0,chunk:50,text:{title:"Search results for query <em>%s%</em>",loading:"Searching&hellip;",previous:"Previous",next:"Next",empty:"No results for query <em>%s%</em>.",end:"No more results for query <em>%s%</em>."},query:{alt:"json",orderby:"updated"}},_=t.head,z=s(I,S(C.src)),B=t.querySelector(z.source);if(B){var P=z.i,R=z.id||h(z.url),D=z.name,U=z.ad,A=z.e;A=A&&e[A],!0===U&&(U=3);var J=S(L.search);n(J[P])&&(delete J[P].url,z=s(z,J[P]));var O,V=z.text,F=z.chunk,G=z.container&&t.querySelector(z.container)||t.body,K=l("div","<div></div>",{class:D+" "+z.direction,id:D+":"+P}),Q=l("div"),W=l("h3","",{class:D+"-title"}),X=l("ol","",{class:D+"-results",id:D+"-results:"+P,start:M}),Y=l("nav","",{class:D+"-pager",id:D+"-pager:"+P}),Z=l("a",V.previous,{class:D+"-previous",href:"",rel:"prev"}),ee=l("a",V.next,{class:D+"-next",href:"",rel:"next"}),te=l("p",V.loading,{class:D+"-loading"});o(e,"scroll",w),o(e,"resize",w),e["_"+H]=function(e){var n,a,h,v=(e=e.feed||{}).entry||[],k=v.length,w=z.target,$=z.image,b=z.excerpt,q="has-title has-url";for($&&(q+=" has-image"),b&&(q+=" has-excerpt"),c(K,q),O=function(e){if(e){var t=(e.link.find((function(e){return"alternate"===e.rel}))||{}).href;if(str="",t){if($){var r,n,a,s="media$thumbnail"in e;!0===$&&($=60),i($)?(r=n=$+"px",$="s"+$+"-c"):(a=/^s(\d+)(\-[cp])?$/.exec($))?(r=a[1]+"px",n=a[2]?a[1]+"px":"auto"):(a=/^w(\d+)\-h(\d+)(\-[cp])?$/.exec($))&&(r=a[1]+"px",n=a[2]+"px"),str+='<p class="'+D+"-image "+(s?"loading":"no-image")+'">',str+=s?'<img class="lazyload" alt="" src="'+e.media$thumbnail.url.replace(/\/s\d+(\-c)?\//g,"/"+$+"/")+'" style="display:block;width:'+r+";height:"+n+';">':'<span class="img lazyload" style="display:block;width:'+r+";height:"+n+';">',str+="</p>"}if(str+='<h4 class="'+D+'-title"><a href="'+t+'"'+(w?' target="'+w+'"':"")+">"+x(e.title.$t)+"</a></h4>",b){var o=e.summary.$t.replace(/<.*?>/g,"").replace(/[<>]/g,"").trim(),c=o.length;!0===b&&(b=200),str+='<p class="'+D+"-excerpt"+(c?"":" no-excerpt")+'">'+x(o.slice(0,b))+(c>b?"&hellip;":"")+"</p>"}return l("li",str)}}},X.innerHTML="",n=0;k>n;++n)f(X,O(v[n]));if(d(te),Z.style.display=M>1?"":"none",ee.style.display=F>k?"none":"",f(Y,Z),f(Y,t.createTextNode(" ")),f(Y,ee),f(h=K.children[0],W),f(h,X),f(h,Y),$){var T=X.getElementsByTagName("img"),S=function(){c(this.parentNode,"error"),g(this,"error.asset",[this.src])},C=function(){u(this.parentNode,"loading"),g(this,"load.asset",[this.src])};for(n=0,a=T.length;a>n;++n)o(T[n],"error",S),o(T[n],"load",C)}(function(){if(!1!==U){var e=+(N.getItem(D)||-1);if(e>U)return N.setItem(D,0),!0;N.setItem(D,++e)}return!1})()&&y(m("5432787597195842010")+p(s(z.query,{callback:"_"+H+"_","max-results":21,orderby:"updated"}))+"&q="+r(E)),g(K,"load",[e,E,M])},e["_"+H+"_"]=function(e){var t=(e=e.feed||{}).entry||[];t=t[Math.floor(Math.random()*t.length)],(t=O(t))&&(c(t,"ad"),f(X,t,X.firstChild)),g(t,"load.ad",[e])},C.id||(C.id=D+"-js"),c(C,D+"-js");var re=z.container,ne=z.css;if(ne&&!t.getElementById(D+"-css")&&y(function(e){return"string"==typeof e}(ne)?ne:h(C.src,"css"),(function(){g(this,"load.asset",[this.href])}),{class:D+"-css",id:D+"-css"}),re&&(re=t.querySelector(re))){for(var ie;ie=re.firstChild;)f(Q,ie);f(re,Q)}var ae,se=z.live;o(B,"submit",(function(t){X.start=M=1,ae&&e.clearTimeout(ae),q.call(this),b(t)})),["cut","input","keydown","paste"].forEach((function(e){o(B.q,e,T)})),o(Z,"click",(function(e){X.start=M-=F,q.call(B),b(e)})),o(ee,"click",(function(e){X.start=M+=F,q.call(B),b(e)})),g(B,"ready",[z,K])}}(window,document);